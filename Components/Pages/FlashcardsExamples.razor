@page "/examples"

<PageTitle>Examples - Fiszki</PageTitle>

<div class="container mt-4">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h2 class="text-primary mb-2">
                <i class="bi bi-card-text me-2"></i>
                Flashcard Examples
            </h2>
            <p class="text-muted mb-4">
                See how other users create effective flashcards with AI and manual input
            </p>
            <hr />
        </div>
    </div>

    <!-- Sample Categories -->
    <div class="row mb-4">
        <div class="col-12">
            <h4 class="mb-3">Popular Categories</h4>
        </div>
        
        <div class="col-12 col-sm-6 col-md-3 mb-2">
            <button class="btn @(selectedCategory == "all" ? "btn-primary" : "btn-outline-primary") w-100"
                    @onclick="@(() => FilterByCategory("all"))">
                All Examples
            </button>
        </div>
        <div class="col-12 col-sm-6 col-md-3 mb-2">
            <button class="btn @(selectedCategory == "language" ? "btn-secondary" : "btn-outline-secondary") w-100"
                    @onclick="@(() => FilterByCategory("language"))">
                Language Learning
            </button>
        </div>
        <div class="col-12 col-sm-6 col-md-3 mb-2">
            <button class="btn @(selectedCategory == "science" ? "btn-info" : "btn-outline-info") w-100"
                    @onclick="@(() => FilterByCategory("science"))">
                Science & Math
            </button>
        </div>
        <div class="col-12 col-sm-6 col-md-3 mb-2">
            <button class="btn @(selectedCategory == "history" ? "btn-success" : "btn-outline-success") w-100"
                    @onclick="@(() => FilterByCategory("history"))">
                History & Culture
            </button>
        </div>
    </div>

    <!-- Flashcard Examples Grid -->
    <div class="row">
        @foreach (var example in GetFilteredExamples().Take(10))
        {
            <div class="col-12 col-sm-6 col-lg-4 mb-4">
                <div class="card h-100 shadow">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h6 class="mb-0 d-flex align-items-center">
                            @if (example.CreationSource == "AI")
                            {
                                <i class="bi bi-stars text-primary me-2"></i>
                            }
                            else
                            {
                                <i class="bi bi-pencil text-secondary me-2"></i>
                            }
                            @example.Category
                        </h6>
                        <span class="badge @(example.CreationSource == "AI" ? "bg-primary" : "bg-secondary")">
                            @example.CreationSource
                        </span>
                    </div>
                    
                    <div class="card-body">
                        <div class="flashcard-container" style="min-height: 200px;">
                            @if (example.IsFlipped)
                            {
                                <!-- Back of card -->
                                <div class="p-3 text-center flashcard-back border rounded" 
                                     style="background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); min-height: 160px; display: flex; align-items: center; justify-content: center;">
                                    <div>
                                        <small class="text-muted mb-2 d-block">Answer:</small>
                                        <div style="font-weight: 500;">
                                            @example.BackContent
                                        </div>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <!-- Front of card -->
                                <div class="p-3 text-center flashcard-front border rounded" 
                                     style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); min-height: 160px; display: flex; align-items: center; justify-content: center;">
                                    <div>
                                        <small class="text-muted mb-2 d-block">Question:</small>
                                        <div style="font-weight: 500;">
                                            @example.FrontContent
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                    
                    <div class="card-footer d-flex justify-content-between align-items-center">
                        <button class="btn btn-outline-primary btn-sm"
                                @onclick="() => FlipCard(example.Id)">
                            <i class="bi bi-arrow-repeat me-1"></i>
                            @(example.IsFlipped ? "Show Question" : "Show Answer")
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" 
                                title="@string.Join(", ", example.Tags)">
                            <i class="bi bi-tags"></i>
                        </button>
                    </div>
                </div>
            </div>
        }
    </div>

    @if (!GetFilteredExamples().Any())
    {
        <div class="row mt-4">
            <div class="col-12 text-center">
                <h6 class="text-muted">
                    No examples found for this category
                </h6>
            </div>
        </div>
    }

    <!-- Call to Action -->
    <div class="row mt-5">
        <div class="col-12 text-center">
            <div class="p-4 rounded" style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);">
                <h5 class="mb-3">
                    Ready to create your own flashcards?
                </h5>
                <p class="mb-4 text-muted">
                    Join thousands of learners using AI to create effective study materials
                </p>
                <a href="/login" class="btn btn-primary btn-lg me-2">
                    <i class="bi bi-box-arrow-in-right me-2"></i>
                    Get Started
                </a>
                <a href="/generate" class="btn btn-outline-primary btn-lg">
                    <i class="bi bi-stars me-2"></i>
                    Try AI Generation
                </a>
            </div>
        </div>
    </div>
</div>

@code {
    private string selectedCategory = "all";

    public class FlashcardExample
    {
        public int Id { get; set; }
        public string FrontContent { get; set; } = "";
        public string BackContent { get; set; } = "";
        public string CreationSource { get; set; } = "";
        public string Category { get; set; } = "";
        public List<string> Tags { get; set; } = new();
        public bool IsFlipped { get; set; }
    }

    private List<FlashcardExample> sampleFlashcards = new()
    {
        new FlashcardExample
        {
            Id = 1,
            FrontContent = "What is the past tense of 'go'?",
            BackContent = "went",
            CreationSource = "AI",
            Category = "Language Learning",
            Tags = new() { "English", "Grammar", "Irregular Verbs" }
        },
        new FlashcardExample
        {
            Id = 2,
            FrontContent = "Translate: 'Hello, how are you?' to Spanish",
            BackContent = "Hola, ¿cómo estás?",
            CreationSource = "Manual",
            Category = "Language Learning",
            Tags = new() { "Spanish", "Greetings", "Basic Phrases" }
        },
        new FlashcardExample
        {
            Id = 3,
            FrontContent = "What is the formula for the area of a circle?",
            BackContent = "A = πr²",
            CreationSource = "AI",
            Category = "Science & Math",
            Tags = new() { "Mathematics", "Geometry", "Formulas" }
        },
        new FlashcardExample
        {
            Id = 4,
            FrontContent = "What is photosynthesis?",
            BackContent = "The process by which plants use sunlight, water, and carbon dioxide to create oxygen and energy in the form of sugar.",
            CreationSource = "AI",
            Category = "Science & Math",
            Tags = new() { "Biology", "Plants", "Processes" }
        },
        new FlashcardExample
        {
            Id = 5,
            FrontContent = "When did World War II end?",
            BackContent = "September 2, 1945",
            CreationSource = "Manual",
            Category = "History & Culture",
            Tags = new() { "WWII", "20th Century", "Important Dates" }
        },
        new FlashcardExample
        {
            Id = 6,
            FrontContent = "Who painted the Mona Lisa?",
            BackContent = "Leonardo da Vinci",
            CreationSource = "Manual",
            Category = "History & Culture",
            Tags = new() { "Art", "Renaissance", "Famous Paintings" }
        },
        new FlashcardExample
        {
            Id = 7,
            FrontContent = "Was ist 'Hund' auf Englisch?",
            BackContent = "Dog",
            CreationSource = "AI",
            Category = "Language Learning",
            Tags = new() { "German", "Animals", "Vocabulary" }
        },
        new FlashcardExample
        {
            Id = 8,
            FrontContent = "What is Newton's second law of motion?",
            BackContent = "F = ma (Force equals mass times acceleration)",
            CreationSource = "AI",
            Category = "Science & Math",
            Tags = new() { "Physics", "Laws of Motion", "Newton" }
        },
        new FlashcardExample
        {
            Id = 9,
            FrontContent = "What year was the Declaration of Independence signed?",
            BackContent = "1776",
            CreationSource = "Manual",
            Category = "History & Culture",
            Tags = new() { "American History", "Independence", "18th Century" }
        },
        new FlashcardExample
        {
            Id = 10,
            FrontContent = "Conjugate 'être' in first person singular present tense",
            BackContent = "je suis",
            CreationSource = "AI",
            Category = "Language Learning",
            Tags = new() { "French", "Verbs", "Conjugation" }
        }
    };

    private void FilterByCategory(string category)
    {
        selectedCategory = category;
        StateHasChanged();
    }

    private IEnumerable<FlashcardExample> GetFilteredExamples()
    {
        if (selectedCategory == "all")
            return sampleFlashcards;
        
        return sampleFlashcards.Where(f => f.Category.ToLower().Contains(selectedCategory.ToLower()));
    }

    private void FlipCard(int cardId)
    {
        var card = sampleFlashcards.FirstOrDefault(f => f.Id == cardId);
        if (card != null)
        {
            card.IsFlipped = !card.IsFlipped;
            StateHasChanged();
        }
    }
}
